!function(){var e=function(){var e=function(){setTimeout(function(){window.scrollTo(0,0)},1e3)},t=function(){switch(location.hash){case"#add":document.body.className="add";break;case"#settings":document.body.className="settings";break;default:document.body.className="list"}e()};t(),window.addEventListener("hashchange",t,!1),window.addEventListener("orientationchange",e,!1);var a="localStorage"in window,n=function(){if(a){var e=localStorage.getItem("name"),t=localStorage.getItem("colorScheme"),n=document.getElementById("user_name"),s=document.forms.settings.name,o=document.documentElement,i=document.forms.settings.color_scheme;e?(n.innerHTML=e+"'s",s.value=e):(n.innerHTML="My",s.value=""),t?(o.className=t.toLowerCase(),i.value=t):(o.className="blue",i.value="Blue")}},s=function(e){if(e.preventDefault(),a){var t=document.forms.settings.name.value;if(t.length>0){var s=document.forms.settings.color_scheme.value;localStorage.setItem("name",t),localStorage.setItem("colorScheme",s),n(),alert("settings saved successfully","settings saved"),location.hash="#list"}else alert("Please Enter Your Name")}else alert("You Brower is not support localStorage")},o=function(e){e.preventDefault(),confirm("This Will erase all data. Are you sure?","Reset data")&&(a&&localStorage.clear(),n(),alert("Application data has been reset","Reset successful"),location.hash="#list")};n(),document.forms.settings.addEventListener("submit",s,!1),document.forms.settings.addEventListener("reset",o,!1);var i,c=window.indexDB||window.webkitIndexDB||window.mozIndexDB||window.msIndexDB||!1,r=(window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.msIDBKeyRange||!1,"openDatabase"in window),d=function(){if(c){var e=c.open("tasks",1),t="onupgradeneeded"in e;e.onsuccess=function(e){if(i=e.target.result,t||"1"==i.version)loadTasks();else{var a=i.setVersion("1");a.onsuccess=function(e){var t=i.createObjectStore("tasks",{Keypath:"id"});t.createIndex("desc","descUpper",{unique:!1}),loadTasks()}}},t&&(e.onupgradeneeded=function(e){i=e.target.result;var t=i.createObjectStore("tasks",{Keypath:"id"});t.createIndex("desc","descUpper",{unique:!1})})}else r&&(i=openDatabase("tasks","1.0","Tasks database",5242880),i=transaction(function(e){var t="CREATE TABLE IF NOT EXISTS tasks(id INTEGER PRIMARY KEY ASC,desc TEXT,due DATATIMEcomplete BOOLEAN)";e.executeSql(t,[],loadTasks)}))};d()};window.addEventListener("load",function(){new e},!1)}();